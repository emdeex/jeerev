<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <title>Server-Sent Events demo</title>
    [JScript includes knockout eventsource]
    [JScript wrap {
      var viewModel = { counter : ko.observable("?") };
      ko.applyBindings(viewModel);

      $.eventsource({
        url: 'events/test',
        message: function (data) { viewModel.counter(data.counter); }
      });
    }]
  </head>
  <body>
    Random value:
    <blockquote data-bind="text: counter"></blockquote>
    (should update once a second)
  </body>
</html>
